<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Editor Mappe Concettuali — libero</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">CM</div>
      <div class="titles">
        <div class="title">Editor Mappe Concettuali</div>
        <div class="subtitle">Costruzione libera • spazio infinito • testo + immagini</div>
      </div>
    </div>

    <div class="toolbar" role="toolbar" aria-label="Strumenti">
      <button class="tool active" id="toolSelect" title="Seleziona / trascina nodi">
        <span class="icon" aria-hidden="true">⟡</span>
        <span class="label">Seleziona</span>
      </button>

      <button class="tool" id="toolPan" title="Pan: spostati nello spazio (trascina lo sfondo)">
        <span class="icon" aria-hidden="true">
          <!-- hand icon -->
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 11V6.5A1.5 1.5 0 0 1 9.5 5 1.5 1.5 0 0 1 11 6.5V11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M11 11V5.7A1.7 1.7 0 0 1 12.7 4 1.7 1.7 0 0 1 14.4 5.7V11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M14.4 11V6.7A1.6 1.6 0 0 1 16 5.1 1.6 1.6 0 0 1 17.6 6.7V12.2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M6.2 12.5 5.4 11.7A1.7 1.7 0 0 1 5.4 9.3 1.7 1.7 0 0 1 7.8 9.3L9.2 10.7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M17.6 12.2V13.2C17.6 17 14.6 20 10.8 20H10.4C8.4 20 6.5 19.2 5.1 17.8L4.2 16.9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </span>
        <span class="label">Pan</span>
      </button>

      <button class="tool" id="toolLink" title="Collega: clicca un nodo, poi un altro per creare una freccia">
        <span class="icon" aria-hidden="true">⟶</span>
        <span class="label">Collega</span>
      </button>

      <span class="sep"></span>

      <button class="btn" id="btnAddText" title="Aggiungi nodo di testo">
        + Testo
      </button>

      <label class="btn file" title="Aggiungi nodo immagine">
        + Immagine
        <input type="file" id="fileAddImage" accept="image/*" />
      </label>

      <span class="sep"></span>

      <button class="btn" id="btnDelete" title="Elimina selezionato (Del)">Elimina</button>

      <span class="sep"></span>

      <button class="btn" id="btnSave" title="Salva nel browser">Salva</button>
      <button class="btn" id="btnLoad" title="Carica dal browser">Carica</button>

      <label class="btn file" title="Importa JSON">
        Importa
        <input type="file" id="fileImport" accept="application/json" />
      </label>
      <button class="btn" id="btnExport" title="Esporta JSON">Esporta</button>

      <div class="zoom">
        <button class="btn small" id="btnZoomOut" title="Zoom -">−</button>
        <div class="zoomval" id="zoomVal">100%</div>
        <button class="btn small" id="btnZoomIn" title="Zoom +">+</button>
        <button class="btn small" id="btnResetView" title="Centra vista">↺</button>
      </div>
    </div>
  </header>

  <main class="stage" id="stage" aria-label="Area di lavoro">
    <div class="viewport" id="viewport">
      <svg class="edges" id="edges" xmlns="http://www.w3.org/2000/svg"></svg>
      <div class="nodes" id="nodes"></div>
    </div>

    <aside class="inspector" id="inspector" aria-label="Proprietà">
      <div class="insp-head">
        <div class="insp-title">Proprietà</div>
        <div class="insp-sub" id="inspSub">Nessuna selezione</div>
      </div>

      <div class="insp-body" id="inspBody">
        <div class="empty">
          Seleziona un nodo o una freccia per modificare testo, colori, etichette, immagini.
        </div>
      </div>

      <div class="insp-foot">
        <details>
          <summary>Scorciatoie</summary>
          <ul>
            <li><b>Del</b>: elimina selezionato</li>
            <li><b>Doppio click</b> sul nodo: modifica testo</li>
            <li><b>Mouse wheel</b>: zoom</li>
            <li><b>Spazio</b> (tieni premuto): pan temporaneo</li>
          </ul>
        </details>
      </div>
    </aside>
  </main>

  <div class="toast" id="toast" aria-live="polite" aria-atomic="true"></div>

  <script src="app.js"></script>
</body>
</html>
